# =============================================================================
# Docker Environment Variables
# =============================================================================
#
# Copy this file:
#   cp .env.docker.example .env.docker
#
# Generate required secrets:
#   APP_KEY:      echo "base64:$(openssl rand -base64 32)"
#   DB_PASSWORD:  openssl rand -base64 32
#
# Run with:
#   docker compose --env-file .env.docker up -d                    # Development
#   docker compose --env-file .env.docker -f docker-compose.yml -f docker-compose.prod.yml up -d  # Production
#
# =============================================================================

# -----------------------------------------------------------------------------
# Application (REQUIRED)
# -----------------------------------------------------------------------------
APP_NAME="Video Editor"
APP_ENV=production
APP_DEBUG=false
APP_URL=https://your-domain.com

# Generate with: echo "base64:$(openssl rand -base64 32)"
APP_KEY=base64:CHANGE_ME_GENERATE_A_REAL_KEY

# -----------------------------------------------------------------------------
# Database - PostgreSQL (REQUIRED)
# -----------------------------------------------------------------------------
DB_CONNECTION=pgsql
DB_HOST=postgres
DB_PORT=5432
DB_DATABASE=videoeditor
DB_USERNAME=videoeditor

# Generate with: openssl rand -base64 32
DB_PASSWORD=CHANGE_ME_GENERATE_A_REAL_PASSWORD

# External port for local access (not used in production)
# DB_EXTERNAL_PORT=5432

# -----------------------------------------------------------------------------
# Redis (REQUIRED for queue/cache)
# -----------------------------------------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
# Optional: set a password for Redis
REDIS_PASSWORD=

# External port for local access (not used in production)
# REDIS_EXTERNAL_PORT=6379

# -----------------------------------------------------------------------------
# External Services (REQUIRED)
# -----------------------------------------------------------------------------
# Get from: https://fal.ai/dashboard/keys
FAL_API_KEY=your-fal-api-key-here

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
LOG_CHANNEL=stderr
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# Cache & Session
# -----------------------------------------------------------------------------
CACHE_STORE=redis
SESSION_DRIVER=redis

# -----------------------------------------------------------------------------
# Queue Configuration
# -----------------------------------------------------------------------------
QUEUE_CONNECTION=redis

# Queue names to process (comma-separated)
QUEUE_NAME=default,renders,generations

# Job timeout in seconds (increase for video processing)
QUEUE_TIMEOUT=300

# Number of retry attempts
QUEUE_TRIES=3

# Max jobs before worker restarts
QUEUE_MAX_JOBS=500

# Memory limit in MB
QUEUE_MEMORY=512

# Number of queue worker replicas (production only)
QUEUE_WORKERS=2

# -----------------------------------------------------------------------------
# Container Settings
# -----------------------------------------------------------------------------
# Container mode: app | queue | scheduler | horizon
# (Set per-service in docker-compose, not here)
# CONTAINER_MODE=app

# Auto-run migrations on container start
# WARNING: Set to true only for initial deploy, then set to false
AUTO_MIGRATE=false

# -----------------------------------------------------------------------------
# Docker Registry (optional)
# -----------------------------------------------------------------------------
# Leave empty for local builds
REGISTRY=
IMAGE_TAG=latest

# -----------------------------------------------------------------------------
# PHP Settings (App Server)
# -----------------------------------------------------------------------------
PHP_MEMORY_LIMIT=256M
PHP_MAX_EXECUTION_TIME=60
PHP_UPLOAD_MAX_FILESIZE=100M
PHP_POST_MAX_SIZE=100M

# -----------------------------------------------------------------------------
# Ports (Local Development Only)
# -----------------------------------------------------------------------------
APP_PORT=8000
# DB_EXTERNAL_PORT=5432
# REDIS_EXTERNAL_PORT=6379
